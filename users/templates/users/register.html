{% extends "main/base.html" %}
{% load crispy_forms_tags %}
{% block content %}

<div class="content-section myid">
    <form method="POST">
        {% csrf_token %}
        <fieldset class="form-group">
            <legend class="border-bottom mb-4">Добро пожаловать!</legend>
            <div class="form-group">
                {{ form.username|as_crispy_field }}
            </div>
            <div class="form-group">
                {{ form.password1|as_crispy_field }}
                {{ form.show_password1|as_crispy_field }}
            </div>
            <div class="form-group">
                {{ form.password2|as_crispy_field }}
                {{ form.show_password2|as_crispy_field }}
            </div>
            
            <div class="form-group">
                {{ form.date|as_crispy_field }}
            </div>
        </fieldset>
        <div class="form-group">
            <button class="btn btn-outline-info" type="submit">Регистрация</button>
        </div>
    </form>
    <div class="border-top pt-3">
        <small class="text-muted">
            Уже есть аккаунт? <a class="ml-2" href="#">Вход</a>
        </small>
    </div>
</div>

{% endblock content %}

{% block extra_js %}
<script>
    const togglePassword1 = document.querySelector('#id_show_password1');
    const password1 = document.querySelector('#id_password1');
    const togglePassword2 = document.querySelector('#id_show_password2');
    const password2 = document.querySelector('#id_password2');

    togglePassword1.addEventListener('change', function (e) {
        const type = password1.getAttribute('type') === 'password' ? 'text' : 'password';
        password1.setAttribute('type', type);
    });

    togglePassword2.addEventListener('change', function (e) {
        const type = password2.getAttribute('type') === 'password' ? 'text' : 'password';
        password2.setAttribute('type', type);
    });
</script>
{% endblock %}
